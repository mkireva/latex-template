\usepackage[
    activate={true,nocompatibility},
    final,
    tracking=true,
    kerning=true,
    spacing=true,
    factor=1100,
    stretch=10,
    shrink=10
]{microtype}   % Enhances typographic quality (kerning, spacing, tracking)

% LANGUAGE TRANSLATIONS ------------------------------------------------------------------
\usepackage[ngerman]{babel} % Language and hyphenation rules for Brazilian Portuguese
\addto\captionsbrazilian{\renewcommand{\contentsname}{Conte√∫do}} % Customize the table of contents title
% LANGUAGE TRANSLATIONS ------------------------------------------------------------------

%\usepackage{mathpazo}
%\linespread{1.1}

\usepackage{lettrine}   % Enables dropped capital letters at the beginning of chapters
\usepackage{graphicx}   % Standard package for including graphics
\usepackage{xcolor}     % Enables custom color definitions
\usepackage{ebgaramond} % Serif font package: EB Garamond
\linespread{1.1}
\usepackage{tikz}       % Powerful vector drawing library
\usetikzlibrary{math,positioning,shadows.blur} % TikZ sublibraries
\usepackage{url}
\usepackage{pgfornament}
\usepackage{verse}

\newcommand{\hsp}{\kern 1pt}    % Custom command for fine-tuning spacing in nested quotation marks

% Paragraph formatting settings
\renewcommand{\baselinestretch}{1.125}      % Increases line spacing for improved readability
\setlength{\parskip}{0pt}                   % Disables additional vertical spacing between paragraphs
\setlength{\parindent}{1em}                 % Sets standard paragraph indentation

% Sentence spacing (prevents extra space after periods)
\frenchspacing

% Avoid widows and orphans in text layout
\widowpenalty=10000
\clubpenalty=10000

% Page dimensions and margins (suitable for trade paperback format)
\usepackage[
    paperheight=9in,
    paperwidth=6in,
    top=0.75in,
    bottom=0.75in,
    outer=0.75in,
    inner=0.875in
]{geometry}

% Relax overfull hbox warnings by allowing flexible spacing
\sloppy

% Table of contents customization
\usepackage[titles]{tocloft}
\renewcommand{\cftchapfont}{\large\itshape}       % Chapter titles in TOC: large italic
\renewcommand{\cftchappagefont}{\normalfont}      % Page numbers in TOC: normal font
\renewcommand{\numberline}[1]{}                   % Remove chapter numbers in TOC
\renewcommand{\cftdot}{}                          % Remove dots in TOC

% Chapter heading customization
\usepackage[center,sc]{titlesec} % Chapter titles: centered and small caps

% Roman numerals for chapter numbers
\renewcommand{\thechapter}{\Roman{chapter}}

% Define chapter title format
\titleformat{\chapter}[block]
  {\normalfont\scshape\LARGE\centering}
  {\thechapter\\}
  {0pt}
  {}
\titlespacing*{\chapter}{0pt}{0pt}{1em}
\makeatletter
\renewcommand{\@makechapterhead}[1]{%
  \vspace*{50pt}
  {\parindent \z@ \centering \normalfont
    \scshape \LARGE
    {#1}\par\nobreak
    \vspace{1em}
  }}
\makeatother

% Section heading customization
\titleformat{\section}[block]
  {\normalfont\scshape\large\centering}
  {}
  {0pt}
  {}
\titlespacing*{\section}{0pt}{2em}{1em}

% Subsection heading customization  
\titleformat{\subsection}[block]
  {\normalfont\itshape\large\centering}
  {}
  {0pt}
  {}
\titlespacing*{\subsection}{0pt}{1.5em}{0.75em}

% Subsubsection heading customization
\titleformat{\subsubsection}[runin]
  {\normalfont\scshape\normalsize}
  {}
  {0pt}
  {}[.\quad]
\titlespacing*{\subsubsection}{0pt}{1em}{0.5em}

% Table of contents formatting for sections
\renewcommand{\cftsecfont}{\large\itshape}             % Section titles in TOC: large italic
\renewcommand{\cftsecpagefont}{\normalfont}            % Section page numbers: normal
\renewcommand{\cftsubsecfont}{\normalfont}             % Subsection titles: normal
\renewcommand{\cftsubsecpagefont}{\normalfont}         % Subsection page numbers: normal
\setlength{\cftsecindent}{1em}                         % Section indentation in TOC
\setlength{\cftsubsecindent}{2em}                      % Subsection indentation in TOC

% Spacing adjustments in table of contents
\setlength{\cftbeforechapskip}{1.5em}                  % Space before each chapter in TOC
\setlength{\cftbeforesecskip}{0.75em}                  % Space before each section in TOC
\setlength{\cftbeforesubsecskip}{0.5em}                % Space before each subsection in TOC

% Header and footer settings
\usepackage{fancyhdr}
\setlength{\headheight}{15pt}
\pagestyle{fancy}
\fancyhf{} % Clear all header and footer fields

\renewcommand{\headrulewidth}{0pt} % Remove header rule line

\fancyhf[CFE,CFO]{\thepage}        % Page number centered in footer (even and odd pages)
%\fancyhead[LE,RO]{\thepage}       % Alternative page numbering in header corners
\fancyhead[CE]{\itshape\authorname} % Author name centered on even-page headers
\fancyhead[CO]{\itshape\booktitle}  % Book title centered on odd-page headers

% Custom color definitions
\definecolor{customgold}{RGB}{203,161,53}   % Define a gold tone for accent use
\definecolor{darkmagenta}{RGB}{139, 0, 139} 
\definecolor{ultradarkmagenta}{RGB}{50, 0, 50}
